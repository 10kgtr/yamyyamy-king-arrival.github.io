<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘ªè©›ãƒé–“</title>
    <link rel="stylesheet" href="curse_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
</head>
<body>


    <button class="glitch-button" id="right-ear" data-text="ğŸ‘‰è€³ã‹ã‚‰å…¥ã‚Šã¾ã™">ğŸ‘‰è€³ã‹ã‚‰å…¥ã‚Šã¾ã™</button>

    <audio id="creepy-audio" loop>
        <source src="audio/creepy_music_box.mp3" type="audio/mpeg">
        ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ audio è¦ç´ ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚
    </audio>

    <script>
        const rightEarBtn = document.getElementById('right-ear');
        const creepyAudio = document.getElementById('creepy-audio');

        rightEarBtn.addEventListener('click', () => {
            if (creepyAudio.paused) {
                creepyAudio.play().catch(err => console.warn("è‡ªå‹•å†ç”Ÿãƒ–ãƒ­ãƒƒã‚¯:", err));
            }
        });
    </script>


    <div class="curse-container">
        <img src="images/kage1.png"
             alt="å‘ªãƒ¯ãƒ¬ã‚·ã‚«ã‚²ã‚­ãƒ³ãƒè‚–åƒ"
             id="cursed-image"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/300x300/000000/FF0000?text=ç”»åƒèª­è¾¼ã‚¨ãƒ©ãƒ¼';">

        <div class="curse-text" id="curse-text-area">
        </div>

        <div id="creeping-paws-container">
        </div>

        <p class="escape-link-container">
            <a href="index.html" class="escape-link" id="escape-button">â€¦â€¦æˆ»ãƒ«â€¦â€¦</a>

        </p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cursedImage = document.getElementById('cursed-image');
            const curseTextArea = document.getElementById('curse-text-area');
            const curseWords = ["å‘ª", "å±æ©Ÿæ„Ÿ", "çµ‚æœ«ã¯æ¥ã‚‹", "æ€¨é­š", "ç¥Ÿå‘³", "æ»…è¾›", "é—‡èƒƒ", "ç—…åŒ»", "è‹¦", "ç‹‚", "çµ¶", "é»’æ£º", "é€ƒãƒ¬ãƒ©ãƒ¬ãƒŠã‚¤", "å¸¸ãƒ‹è¦‹ãƒ†ã‚¤ãƒ«", "ãƒ¤ãƒŸãƒ¼ãƒ¤ãƒŸãƒ¼ã¯æ¥ã‚‹", "å±", "æ­»"];
            const creepingPawsContainer = document.getElementById('creeping-paws-container');
            const escapeButton = document.getElementById('escape-button'); // escape-buttonã®IDã‚’å–å¾—

            // ç”»åƒã‚’æºã‚‰ã™
            if (cursedImage) {
                setInterval(() => {
                    const x = Math.random() * 6 - 3;
                    const y = Math.random() * 6 - 3;
                    cursedImage.style.transform = `translate(${x}px, ${y}px) rotate(${Math.random() * 1 - 0.5}deg)`;
                }, 250);
            }

            // å‘ªã„ã®è¨€è‘‰ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¡¨ç¤º
            if (curseTextArea) {
                setInterval(() => {
                    const word = curseWords[Math.floor(Math.random() * curseWords.length)];
                    const span = document.createElement('span');
                    span.textContent = word;
                    span.style.position = 'absolute';
                    span.style.left = `${Math.random() * 80 + 10}%`;
                    span.style.top = `${Math.random() * 80 + 10}%`;
                    span.style.fontSize = `${Math.random() * 1.5 + 1}em`;
                    span.style.color = `rgba(200, 0, 0, ${0.2 + Math.random() * 0.5})`;
                    span.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
                    span.style.fontFamily = "'Creepster', cursive";
                    span.style.textShadow = "1px 1px 2px #000";
                    span.style.zIndex = 1;
                    curseTextArea.appendChild(span);

                    if (curseTextArea.children.length > 15) {
                        curseTextArea.removeChild(curseTextArea.firstChild);
                    }
                }, 700);
            } else {
                console.warn("Element with ID 'curse-text-area' not found. Curse words will not be displayed.");
            }

            // ã†ã”ã‚ãçŒ«ã®æ‰‹ã‚’è¿½åŠ 
            if (creepingPawsContainer) {
                const numberOfPaws = 4; // å·¦å³ã«2ã¤ãšã¤
                for (let i = 0; i < numberOfPaws; i++) {
                    const paw = document.createElement('div');
                    paw.classList.add('creeping-paw');
                    paw.style.backgroundImage = 'url("images/yaminote.png")'; // çŒ«ã®æ‰‹ã®ç”»åƒãƒ‘ã‚¹
                    paw.style.backgroundSize = 'contain';
                    paw.style.backgroundRepeat = 'no-repeat';
                    paw.style.width = '150px'; // ã‚µã‚¤ã‚ºèª¿æ•´
                    paw.style.height = '200px'; // ç¸¦é•·ã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´ (300x400ã®æ¯”ç‡ã‚’ç¶­æŒ)

                    paw.style.position = 'fixed'; // ç”»é¢ã«å¯¾ã—ã¦å›ºå®š
                    paw.style.opacity = '0.7'; // å°‘ã—é€æ˜åº¦ã‚’ä¸Šã’ã‚‹
                    paw.style.zIndex = '2'; // ä»–ã®è¦ç´ ã‚ˆã‚Šæ‰‹å‰ã«

                    const verticalPos = `${Math.random() * 60 + 20}vh`; // ç”»é¢ã®20%ã‹ã‚‰80%ã®é«˜ã•ã«ãƒ©ãƒ³ãƒ€ãƒ é…ç½®

                    if (i < numberOfPaws / 2) { // å·¦å´ã®æ‰‹
                        paw.style.left = `${Math.random() * 10 - 5}%`; // å·¦ç«¯ä»˜è¿‘ã«é…ç½®
                        paw.style.animation = `wiggleLeft 3s infinite ${Math.random() * 2}s alternate ease-in-out`;
                    } else { // å³å´ã®æ‰‹
                        paw.style.right = `${Math.random() * 10 - 5}%`; // å³ç«¯ä»˜è¿‘ã«é…ç½®
                        paw.style.animation = `wiggleRight 3s infinite ${Math.random() * 2}s alternate ease-in-out`;
                    }
                    paw.style.top = verticalPos;
                    creepingPawsContainer.appendChild(paw);
                }
            }

            // ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’é€ƒã’ã‚‹ã‚ˆã†ã«å‹•ã‹ã™
            if (escapeButton) {
                escapeButton.addEventListener('mouseover', () => {
                    const maxX = window.innerWidth - escapeButton.offsetWidth;
                    const maxY = window.innerHeight - escapeButton.offsetHeight;
                    const newX = Math.random() * maxX;
                    const newY = Math.random() * maxY;
                    escapeButton.style.position = 'absolute'; // çµ¶å¯¾ä½ç½®æŒ‡å®šã«å¤‰æ›´
                    escapeButton.style.left = `${newX}px`;
                    escapeButton.style.top = `${newY}px`;
                });
            }

            // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç‚¹æ»…ã•ã›ã‚‹ (å¤‰æ›´ãªã—)
            let originalTitle = document.title;
            let isTitleCursed = false;
            setInterval(() => {
                if (isTitleCursed) {
                    document.title = originalTitle;
                } else {
                    let cursedTitle = "";
                    for (let i = 0; i < originalTitle.length; i++) {
                        cursedTitle += Math.random() < 0.5 ? curseWords[Math.floor(Math.random() * 3)] : originalTitle[i];
                    }
                    document.title = cursedTitle.substring(0, originalTitle.length + 2);
                }
                isTitleCursed = !isTitleCursed;
            }, 1500);
        });
    </script>
</body>
</html>